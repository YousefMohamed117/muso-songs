(function(){"use strict";var e={8105:function(e,n,t){var l=t(9242),a=t(3396);const o={class:"content"};function s(e,n,t,l,s,i){const r=(0,a.up)("Navbar"),u=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(r),(0,a._)("div",o,[(0,a.Wm)(u)])],64)}var i=t(7139),r=t.p+"img/ninja.b28c4fe4.png";const u=e=>((0,a.dD)("data-v-47da7d97"),e=e(),(0,a.Cn)(),e),d={class:"navbar"},c=u((()=>(0,a._)("img",{src:r},null,-1))),p={class:"links"},v={key:0},g={key:1};function m(e,n,t,l,o,s){const r=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",d,[(0,a._)("nav",null,[c,(0,a._)("h1",null,[(0,a.Wm)(r,{to:{name:"Home"}},{default:(0,a.w5)((()=>[(0,a.Uk)("Muso Ninjas")])),_:1})]),(0,a._)("div",p,[l.user?((0,a.wg)(),(0,a.iD)("div",v,[(0,a.Wm)(r,{to:{name:"CreatePlaylist"}},{default:(0,a.w5)((()=>[(0,a.Uk)("Create Playlist")])),_:1}),(0,a.Wm)(r,{to:{name:"UserPlaylists"}},{default:(0,a.w5)((()=>[(0,a.Uk)("My Playlists")])),_:1}),(0,a._)("span",null,"Hi there, "+(0,i.zw)(l.user.displayName),1),(0,a._)("button",{onClick:n[0]||(n[0]=(...e)=>l.handleSubmit&&l.handleSubmit(...e))},"Logout")])):((0,a.wg)(),(0,a.iD)("div",g,[(0,a.Wm)(r,{class:"btn",to:{name:"Signup"}},{default:(0,a.w5)((()=>[(0,a.Uk)("Signup")])),_:1}),(0,a.Wm)(r,{class:"btn",to:{name:"Login"}},{default:(0,a.w5)((()=>[(0,a.Uk)("Login")])),_:1})]))])])])}t(560);var y=t(4870),h=t(1509);t(5363),t(476),t(1609),t(6071);const w={apiKey:"AIzaSyDyVfTMve36uzxWfOfE7JpIhftyevV84So",authDomain:"yousef-muso.firebaseapp.com",projectId:"yousef-muso",storageBucket:"yousef-muso.appspot.com",messagingSenderId:"387433518154",appId:"1:387433518154:web:7b7c4db6514bee465282b3"};h.Z.initializeApp(w);const f=h.Z.auth(),b=h.Z.firestore(),_=h.Z.storage(),k=h.Z.firestore.FieldValue.serverTimestamp,D=(0,y.iH)(null),P=(0,y.iH)(!1),S=async()=>{D.value=null,P.value=!0;try{await f.signOut(),P.value=!1,console.log("logged out")}catch(e){console.log(e.message),D.value=e.message,P.value=!1}},H=()=>({error:D,logout:S,isPending:P});var U=H,C=t(2483);const q=(0,y.iH)(f.currentUser);f.onAuthStateChanged((e=>{q.value=e}));const E=()=>({user:q});var j=E,I={setup(){const{error:e,logout:n,isPending:t}=U(),l=(0,C.tv)(),{user:a}=j(),o=()=>{n(),l.push({name:"Login"}),console.log("bye")};return{handleSubmit:o,error:e,isPending:t,user:a}}},z=t(89);const N=(0,z.Z)(I,[["render",m],["__scopeId","data-v-47da7d97"]]);var O=N,V={components:{Navbar:O}};const A=(0,z.Z)(V,[["render",s]]);var L=A;const W={class:"home"},Z={key:0,class:"error"},M={key:1};function x(e,n,t,l,o,s){const i=(0,a.up)("ListView");return(0,a.wg)(),(0,a.iD)("div",W,[l.error?((0,a.wg)(),(0,a.iD)("div",Z,"Could not fetch the data")):(0,a.kq)("",!0),l.documents?((0,a.wg)(),(0,a.iD)("div",M,[(0,a.Wm)(i,{playlists:l.documents},null,8,["playlists"])])):(0,a.kq)("",!0)])}const F=(e,n)=>{const t=(0,y.iH)(null),l=(0,y.iH)(null);let o=b.collection(e).orderBy("createdAt");n&&(o=o.where(...n));const s=o.onSnapshot((e=>{let n=[];e.docs.forEach((e=>{e.data().createdAt&&n.push({...e.data(),id:e.id})})),t.value=n,l.value=null}),(e=>{console.log(e.message),t.value=null,l.value="could not fetch the data"}));return(0,a.m0)((e=>{e((()=>s()))})),{error:l,documents:t}};var T=F;const Y={class:"single"},K={class:"thumbnail"},B=["src"],$={class:"info"},J={class:"song-number"};function R(e,n,t,l,o,s){const r=(0,a.up)("router-link");return(0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.playlists,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id},[(0,a.Wm)(r,{to:{name:"PlaylistDetails",params:{id:e.id}}},{default:(0,a.w5)((()=>[(0,a._)("div",Y,[(0,a._)("div",K,[(0,a._)("img",{src:e.coverUrl},null,8,B)]),(0,a._)("div",$,[(0,a._)("h3",null,(0,i.zw)(e.title),1),(0,a._)("p",null,"created by "+(0,i.zw)(e.userName),1)]),(0,a._)("div",J,[(0,a._)("p",null,(0,i.zw)(e.songs.length)+" songs",1)])])])),_:2},1032,["to"])])))),128)}var G={props:["playlists"]};const Q=(0,z.Z)(G,[["render",R],["__scopeId","data-v-889a8cc4"]]);var X=Q,ee={components:{ListView:X},setup(){const{error:e,documents:n}=T("playlists");return{error:e,documents:n}}};const ne=(0,z.Z)(ee,[["render",x]]);var te=ne;const le=(0,a._)("h3",null,"Login",-1),ae={key:0},oe={key:1,disabled:""},se={class:"error"};function ie(e,n,t,o,s,r){return(0,a.wg)(),(0,a.iD)("form",{onSubmit:n[2]||(n[2]=(0,l.iM)(((...e)=>o.handleSubmit&&o.handleSubmit(...e)),["prevent"]))},[le,(0,a.wy)((0,a._)("input",{type:"email",placeholder:"Enter Email",required:"","onUpdate:modelValue":n[0]||(n[0]=e=>o.email=e)},null,512),[[l.nr,o.email]]),(0,a.wy)((0,a._)("input",{type:"password",placeholder:"Enter Password",required:"","onUpdate:modelValue":n[1]||(n[1]=e=>o.password=e)},null,512),[[l.nr,o.password]]),o.isPending?o.isPending?((0,a.wg)(),(0,a.iD)("button",oe,"Loading...")):(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("button",ae,"Login")),(0,a._)("div",se,(0,i.zw)(o.error),1)],32)}const re=(0,y.iH)(null),ue=(0,y.iH)(!1),de=async(e,n)=>{re.value=null,ue.value=!0;try{const t=await f.signInWithEmailAndPassword(e,n);return re.value=null,ue.value=!1,t}catch(t){console.log(t.message),re.value="Incorrect login credentials",ue.value=!1}},ce=()=>({error:re,login:de,isPending:ue});var pe=ce,ve={setup(){const{error:e,login:n,isPending:t}=pe(),l=(0,y.iH)(""),a=(0,y.iH)(""),o=(0,C.tv)(),s=async()=>{await n(l.value,a.value),e.value||o.push({name:"Home"})};return{email:l,password:a,error:e,handleSubmit:s,isPending:t}}};const ge=(0,z.Z)(ve,[["render",ie]]);var me=ge;const ye=(0,a._)("h3",null,"Sign up",-1),he={key:0},we={key:1,disabled:""},fe={class:"error"};function be(e,n,t,o,s,r){return(0,a.wg)(),(0,a.iD)("form",{onSubmit:n[3]||(n[3]=(0,l.iM)(((...e)=>o.handleSubmit&&o.handleSubmit(...e)),["prevent"]))},[ye,(0,a.wy)((0,a._)("input",{type:"text",placeholder:"Enter Username",required:"","onUpdate:modelValue":n[0]||(n[0]=e=>o.displayName=e)},null,512),[[l.nr,o.displayName]]),(0,a.wy)((0,a._)("input",{type:"email",placeholder:"Enter Email",required:"","onUpdate:modelValue":n[1]||(n[1]=e=>o.email=e)},null,512),[[l.nr,o.email]]),(0,a.wy)((0,a._)("input",{type:"password",placeholder:"Enter Password",required:"","onUpdate:modelValue":n[2]||(n[2]=e=>o.password=e)},null,512),[[l.nr,o.password]]),o.isPending?o.isPending?((0,a.wg)(),(0,a.iD)("button",we,"Loading...")):(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("button",he,"Sign up")),(0,a._)("div",fe,(0,i.zw)(o.error),1)],32)}const _e=(0,y.iH)(null),ke=(0,y.iH)(!1),De=async(e,n,t)=>{_e.value=null,ke.value=!0;try{const l=await f.createUserWithEmailAndPassword(e,n);if(!l)throw new Error("Could not complete signup");return await l.user.updateProfile({displayName:t}),_e.value=null,ke.value=!1,l}catch(l){console.log(l.message),_e.value=l.message,ke.value=!1}},Pe=()=>({error:_e,signup:De,isPending:ke});var Se=Pe,He={setup(){const{error:e,signup:n,isPending:t}=Se(),l=(0,y.iH)(""),a=(0,y.iH)(""),o=(0,y.iH)(""),s=async()=>{await n(l.value,a.value,o.value),e.value||console.log("nice")};return{email:l,password:a,error:e,handleSubmit:s,isPending:t,displayName:o}}};const Ue=(0,z.Z)(He,[["render",be]]);var Ce=Ue;const qe=(0,a._)("h3",null,"Create you playlist",-1),Ee=(0,a._)("label",null,"upload you playlist cover",-1),je={class:"error"},Ie={key:0},ze={key:1,disabled:""};function Ne(e,n,t,o,s,r){return(0,a.wg)(),(0,a.iD)("form",{onSubmit:n[3]||(n[3]=(0,l.iM)(((...e)=>o.handleSubmit&&o.handleSubmit(...e)),["prevent"]))},[qe,(0,a.wy)((0,a._)("input",{type:"text",required:"",placeholder:"Playlist Name","onUpdate:modelValue":n[0]||(n[0]=e=>o.title=e)},null,512),[[l.nr,o.title]]),(0,a.wy)((0,a._)("textarea",{required:"",placeholder:"Playlist Description...","onUpdate:modelValue":n[1]||(n[1]=e=>o.description=e)},null,512),[[l.nr,o.description]]),Ee,(0,a._)("input",{type:"file",onChange:n[2]||(n[2]=(...e)=>o.handleChange&&o.handleChange(...e))},null,32),(0,a._)("div",je,(0,i.zw)(o.fileError),1),o.isPending?((0,a.wg)(),(0,a.iD)("button",ze,"saving...")):((0,a.wg)(),(0,a.iD)("button",Ie,"submit"))],32)}const{user:Oe}=j(),Ve=()=>{const e=(0,y.iH)(null),n=(0,y.iH)(null),t=(0,y.iH)(null),l=async l=>{n.value=`covers/${Oe.value.uid}/${l.name}`;const a=_.ref(n.value);try{const e=await a.put(l);t.value=await e.ref.getDownloadURL()}catch(o){e.value=o}},a=async e=>{const n=_.ref(e);await n.delete()};return{error:e,filePath:n,url:t,uploadImage:l,deleteImage:a}};var Ae=Ve;const Le=e=>{const n=(0,y.iH)(null),t=(0,y.iH)(!1),l=async l=>{n.value=null,t.value=!0;try{const n=await b.collection(e).add(l);return t.value=!1,console.log(n),n}catch(a){console.log(a.message),n.value="could not send the message",t.value=!1}};return{error:n,addDoc:l,isPending:t}};var We=Le,Ze={setup(){const e=(0,y.iH)(""),n=(0,y.iH)(""),t=(0,y.iH)(null),l=(0,y.iH)(null),{filePath:a,url:o,uploadImage:s}=Ae(),{error:i,addDoc:r}=We("playlists"),{user:u}=j(),d=(0,y.iH)(!1),c=(0,C.tv)();let p=["image/png","image/jpeg","image/jpg"];const v=async()=>{if(t.value){d.value=!0,await s(t.value);const l=await r({title:e.value,description:n.value,userId:u.value.uid,userName:u.value.displayName,filePath:a.value,coverUrl:o.value,createdAt:k(),songs:[]});d.value=!1,i.value||c.push({name:"PlaylistDetails",params:{id:l.id}})}},g=e=>{const n=e.target.files[0];n&&p.includes(n.type)?(t.value=n,l.value=null):(l.value="please select an png or jpeg or jpg image  ",t.value=null)};return{title:e,description:n,handleSubmit:v,handleChange:g,fileError:l,file:t,isPending:d}}};const Me=(0,z.Z)(Ze,[["render",Ne]]);var xe=Me;const Fe={key:0,class:"error"},Te={key:1,class:"playlist-details"},Ye={class:"playlist-info"},Ke={class:"cover"},Be=["src"],$e={class:"username"},Je={class:"description"},Re={class:"song-list"},Ge={key:0},Qe={class:"details"},Xe=["onClick"];function en(e,n,t,l,o,s){const r=(0,a.up)("AddSong");return(0,a.wg)(),(0,a.iD)(a.HY,null,[l.error?((0,a.wg)(),(0,a.iD)("div",Fe,(0,i.zw)(l.error),1)):(0,a.kq)("",!0),l.playlist?((0,a.wg)(),(0,a.iD)("div",Te,[(0,a._)("div",Ye,[(0,a._)("div",Ke,[(0,a._)("img",{src:l.playlist.coverUrl},null,8,Be)]),(0,a._)("h2",null,(0,i.zw)(l.playlist.title),1),(0,a._)("p",$e,"Created by "+(0,i.zw)(l.playlist.userName),1),(0,a._)("p",Je,(0,i.zw)(l.playlist.description),1),l.ownership?((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:n[0]||(n[0]=(...e)=>l.handleDelete&&l.handleDelete(...e))},"Delete Playlist")):(0,a.kq)("",!0)]),(0,a._)("div",Re,[l.playlist.songs.length?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",Ge," No songs have been added to this playlist yet. ")),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.playlist.songs,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id,class:"single-song"},[(0,a._)("div",Qe,[(0,a._)("h3",null,(0,i.zw)(e.title),1),(0,a._)("p",null,(0,i.zw)(e.artist),1)]),l.ownership?((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:n=>l.deleteSong(e.id)},"delete",8,Xe)):(0,a.kq)("",!0)])))),128)),(0,a.Wm)(r,{playlist:l.playlist},null,8,["playlist"])])])):(0,a.kq)("",!0)],64)}const nn=e=>((0,a.dD)("data-v-2c8a1467"),e=e(),(0,a.Cn)(),e),tn={class:"add-song"},ln=nn((()=>(0,a._)("h4",null,"Add a New Song",-1))),an=nn((()=>(0,a._)("button",null,"Add",-1)));function on(e,n,t,o,s,i){return(0,a.wg)(),(0,a.iD)("div",tn,[o.showForm?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:n[0]||(n[0]=e=>o.showForm=!0)},"Add Songs")),o.showForm?((0,a.wg)(),(0,a.iD)("form",{key:1,onSubmit:n[3]||(n[3]=(0,l.iM)(((...e)=>o.handleSubmit&&o.handleSubmit(...e)),["prevent"]))},[ln,(0,a.wy)((0,a._)("input",{type:"text",placeholder:"Song title",required:"","onUpdate:modelValue":n[1]||(n[1]=e=>o.title=e)},null,512),[[l.nr,o.title]]),(0,a.wy)((0,a._)("input",{type:"text",placeholder:"Artist",required:"","onUpdate:modelValue":n[2]||(n[2]=e=>o.artist=e)},null,512),[[l.nr,o.artist]]),an],32)):(0,a.kq)("",!0)])}const sn=(e,n)=>{let t=(0,y.iH)(null),l=(0,y.iH)(!1),a=b.collection(e).doc(n);const o=async()=>{l.value=!0,t.value=null;try{const e=await a.delete();return l.value=!1,e}catch(e){console.log(e.message),l.value=!1,t.value="could not delete the document"}},s=async e=>{l.value=!0,t.value=null;try{const n=await a.update(e);return l.value=!1,n}catch(n){console.log(n.message),l.value=!1,t.value="could not update the song"}};return{error:t,isPending:l,deleteDoc:o,updateSong:s}};var rn=sn,un={props:["playlist"],setup(e){const n=(0,y.iH)(""),t=(0,y.iH)(""),l=(0,y.iH)(!1),{updateSong:a}=rn("playlists",e.playlist.id),o=async()=>{const l={title:n.value,artist:t.value,id:Math.floor(1e6*Math.random())};await a({songs:[...e.playlist.songs,l]}),n.value="",t.value=""};return{title:n,artist:t,showForm:l,handleSubmit:o}}};const dn=(0,z.Z)(un,[["render",on],["__scopeId","data-v-2c8a1467"]]);var cn=dn;const pn=(e,n)=>{const t=(0,y.iH)(null),l=(0,y.iH)(null);let o=b.collection(e).doc(n);const s=o.onSnapshot((e=>{e.data()&&(t.value={...e.data(),id:e.id},l.value=null)}),(e=>{console.log(e.message),l.value="the document does not exist"}));return(0,a.m0)((e=>{e((()=>s()))})),{error:l,document:t}};var vn=pn,gn={props:["id"],components:{AddSong:cn},setup(e){const{error:n,document:t}=vn("playlists",e.id),{user:l}=j(),{deleteDoc:o}=rn("playlists",e.id),{updateSong:s}=rn("playlists",e.id),{deleteImage:i}=Ae(),r=(0,C.tv)(),u=(0,a.Fl)((()=>t.value&&l.value&&l.value.uid==t.value.userId)),d=async()=>{await o(),await i(t.value.filePath),r.push({name:"Home"})},c=e=>{const n=t.value.songs.filter((n=>n.id!=e));s({songs:n})};return{error:n,playlist:t,ownership:u,handleDelete:d,deleteSong:c}}};const mn=(0,z.Z)(gn,[["render",en]]);var yn=mn;const hn={class:"user-playlists"},wn=(0,a._)("h2",null,"My Playlists",-1),fn={key:0};function bn(e,n,t,l,o,s){const i=(0,a.up)("ListView"),r=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",hn,[wn,l.documents?((0,a.wg)(),(0,a.iD)("div",fn,[(0,a.Wm)(i,{playlists:l.documents},null,8,["playlists"])])):(0,a.kq)("",!0),(0,a.Wm)(r,{to:{name:"CreatePlaylist"},class:"btn"},{default:(0,a.w5)((()=>[(0,a.Uk)("Create a New Playlist")])),_:1})])}var _n={components:{ListView:X},props:["id"],setup(){const{user:e}=j(),{error:n,documents:t}=T("playlists",["userId","==",e.value.uid]);return{documents:t}}};const kn=(0,z.Z)(_n,[["render",bn]]);var Dn=kn;const Pn=(e,n,t)=>{let l=f.currentUser;l?t():t({name:"Login"})},Sn=[{path:"/",name:"Home",component:te,beforeEnter:Pn},{path:"/login",name:"Login",component:me},{path:"/signup",name:"Signup",component:Ce},{path:"/playlists/create",name:"CreatePlaylist",component:xe,beforeEnter:Pn},{path:"/Playlists/:id",name:"PlaylistDetails",component:yn,beforeEnter:Pn,props:!0},{path:"/playlists/user",name:"UserPlaylists",component:Dn,beforeEnter:Pn}],Hn=(0,C.p7)({history:(0,C.PO)("/muso-songs/"),routes:Sn});var Un=Hn;let Cn;f.onAuthStateChanged((()=>{Cn||(Cn=(0,l.ri)(L).use(Un).mount("#app"))}))}},n={};function t(l){var a=n[l];if(void 0!==a)return a.exports;var o=n[l]={exports:{}};return e[l].call(o.exports,o,o.exports,t),o.exports}t.m=e,function(){var e=[];t.O=function(n,l,a,o){if(!l){var s=1/0;for(d=0;d<e.length;d++){l=e[d][0],a=e[d][1],o=e[d][2];for(var i=!0,r=0;r<l.length;r++)(!1&o||s>=o)&&Object.keys(t.O).every((function(e){return t.O[e](l[r])}))?l.splice(r--,1):(i=!1,o<s&&(s=o));if(i){e.splice(d--,1);var u=a();void 0!==u&&(n=u)}}return n}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[l,a,o]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var l in n)t.o(n,l)&&!t.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:n[l]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.p="/muso-songs/"}(),function(){var e={143:0};t.O.j=function(n){return 0===e[n]};var n=function(n,l){var a,o,s=l[0],i=l[1],r=l[2],u=0;if(s.some((function(n){return 0!==e[n]}))){for(a in i)t.o(i,a)&&(t.m[a]=i[a]);if(r)var d=r(t)}for(n&&n(l);u<s.length;u++)o=s[u],t.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return t.O(d)},l=self["webpackChunkmuso_ninjas"]=self["webpackChunkmuso_ninjas"]||[];l.forEach(n.bind(null,0)),l.push=n.bind(null,l.push.bind(l))}();var l=t.O(void 0,[998],(function(){return t(8105)}));l=t.O(l)})();
//# sourceMappingURL=app.9db034c3.js.map